<!doctype html>
<html>
<head>
<meta charset="utf-8">

<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

<script>
AFRAME.registerComponent('videohandler', {
    init: function () {
        const marker = this.el;
        const video = document.querySelector("#vid");

        marker.addEventListener('markerFound', function () {
            video.play();
        });

        marker.addEventListener('markerLost', function () {
            video.pause();
        });
    }
});
</script>
</head>

<body style="margin: 0; overflow: hidden;">

<a-scene 
    embedded
    vr-mode-ui="enabled: false"
    renderer="logarithmicDepthBuffer: true"
    arjs="sourceType: webcam; debugUIEnabled: false;"
>

    <a-assets>
        <video 
            id="vid"
            src="assets/asset.mp4"
            preload="auto"
            loop
            muted
            playsinline
            webkit-playsinline
            crossorigin="anonymous"
        ></video>
    </a-assets>

    <a-marker 
        type="pattern"
        url="assets/marker.patt"
        videohandler
        smooth="true"
        smoothCount="8"
        smoothTolerance="0.01"
        smoothThreshold="5"
    >
        <a-video 
            src="#vid"
            width="1"
            height="0.5625"
            position="0 0 0"
            rotation="-90 0 0"
        ></a-video>
    </a-marker>

    <a-entity camera></a-entity>

</a-scene>
</body>
</html>
