<!doctype html>
<html>
<head>
<meta charset="utf-8">

<!-- AFRAME -->
<script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>

<!-- AR.JS -->
<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

<!-- Gesture Controls -->
<script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-detector.js"></script>
<script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-handler.js"></script>

<style>
body { margin: 0; overflow: hidden; background: black; }
#ytplayer {
    display: none;
    position: fixed;
    inset: 0;
    background: black;
    z-index: 999;
}
</style>

<script>
AFRAME.registerComponent('elite-video-handler', {
    init: function () {
        const marker = this.el;
        const vid = document.querySelector("#vid");
        const glow = document.querySelector("#glow");

        marker.addEventListener('markerFound', () => {
            vid.play();
            glow.setAttribute("visible", true);
        });

        marker.addEventListener('markerLost', () => {
            vid.pause();
            glow.setAttribute("visible", false);
        });
    }
});
</script>
</head>

<body>

<a-scene 
    embedded
    vr-mode-ui="enabled:false"
    loading-screen="enabled:false"
    arjs="sourceType:webcam; debugUIEnabled:false;"
    renderer="colorManagement:true; physicallyCorrectLights:true"
    gesture-detector>

<a-assets>
    <!-- Replace with direct MP4 if available -->
    <video 
        id="vid"
        src="asset.mp4"
        preload="auto"
        loop
        crossorigin="anonymous"
        muted
        playsinline>
    </video>
</a-assets>

<a-marker 
    preset="custom"
    url="marker.patt"
    elite-video-handler
    smooth="true"
    smoothCount="15"
    smoothTolerance="0.005"
    smoothThreshold="5"
>

    <!-- HOLOGRAPHIC FRAME -->
    <a-plane 
        width="1.4"
        height="0.9"
        position="0 0.1 0"
        rotation="-90 0 0"
        material="color:#00FFFF; opacity:0.15; metalness:0.7; roughness:0.1">
    </a-plane>

    <!-- GLOW BORDER -->
    <a-ring 
        id="glow"
        radius-inner="0.7"
        radius-outer="0.75"
        position="0 0.12 0"
        rotation="-90 0 0"
        material="color:#00FFFF; emissive:#00FFFF; emissiveIntensity:2"
        visible="false">
    </a-ring>

    <!-- VIDEO SCREEN -->
    <a-video
        src="#vid"
        width="1.3"
        height="0.75"
        position="0 0.15 0"
        rotation="-90 0 0"
        class="clickable"
        gesture-handler
        material="shader:flat; metalness:0.2; roughness:0.1">
    </a-video>

    <!-- CINEMATIC SHADOW PLANE -->
    <a-plane 
        width="1.6"
        height="1"
        position="0 -0.01 0"
        rotation="-90 0 0"
        color="black"
        opacity="0.3">
    </a-plane>

</a-marker>

<a-entity camera></a-entity>

</a-scene>
</body>
</html>
